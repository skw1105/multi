<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
				"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="edu.autocar.dao.MemberShipDao">
	<select id="count" resultType="int">
		SELECT count(*) FROM membership
	</select>

	<select id="getPage" resultType="Member">
		SELECT user_id, name,
		EXPLANATION, update_date
		FROM(
		SELECT ROW_NUMBER() OVER (ORDER BY
		upload_date DESC) AS SEQ,
		user_id, name, EXPLANATION, update_date
		FROM
		MEMBERship
		)
		WHERE SEQ BETWEEN #{start} AND #{end}
		ORDER BY update_date
		DESC
	</select>

	<select id="findById" parameterType="String" resultType="Member">
		SELECT *
		from membership
		WHERE user_id=#{userId}
	</select>

	<insert id="insert" parameterType="Member"
		useGeneratedKeys="true" keyColumn="user_id" keyProperty="userId">
		insert into
		membership (user_id, password, name, salt, email, phone, explanation, reg_date, update_date, upload_date)
		values(#{userId}, #{password}, #{name}, #{salt}, #{email}, #{phone}, #{explanation}, sysdate, sysdate, sysdate)
	</insert>

	<update id="update" parameterType="Member">
		UPDATE membership SET
		email =	#{email},
		phone = #{phone},
		address = #{address},
		EXPLANATION =#{EXPLANATION}
		WHERE user_id=#{userId} and password=#{password}
	</update>

	<delete id="delete">
		DELETE FROM member
		WHERE user_id=#{userId} and password=#{password}
	</delete>
</mapper>
